///|
fn main {
  // 1. åˆå§‹åŒ–é…ç½®ä¸ IoC å®¹å™¨
  let config = [("server.port", "8080"), ("app.name", "Autumn_frame_Hello")]
  let _ctx = @ApplicationContext.ApplicationContext::new(config, "demo")

  // 2. å®šä¹‰ HTML æ§åˆ¶å™¨
  let hello_controller = @Controller.Controller::new("/hello").get("/", fn(
    _req : @Http.HttpRequest,
  ) {
    let html = "<!DOCTYPE html>\n" +
      "<html lang=\"zh-CN\">\n" +
      "<head>\n" +
      "  <meta charset=\"utf-8\" />\n" +
      "  <title>Hello MoonSpring</title>\n" +
      "</head>\n" +
      "<body>\n" +
      "  <h1>Autumn_frame HelloğŸ˜²!</h1>\n" +
      "</body>\n" +
      "</html>\n"
    @Http.HttpResponse::ok(html).set_header(
      "Content-Type", "text/html; charset=utf-8",
    )
  })
  // 3. æ³¨å†Œæ§åˆ¶å™¨å¹¶å¯åŠ¨æœåŠ¡å™¨
  let dispatcher = @Dispatcher.DispatcherServlet::new().register_controller(
    "helloHtmlController", hello_controller,
  )
  println("ğŸš€ Autumn_frame å¯åŠ¨ä¸­: http://localhost:8080/hello")
  @Boot.BootApplication::run(8080, fn() { dispatcher })
}
